on_actions = {

	#SOU Gets Annexed By SOV and Receives Events
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						tag = SOU
					}
					FROM = {
						tag = SOV
					}
				}
				ROOT = {
					transfer_navy = {
						target = FROM
					}
				}	
				every_state = {
					limit = {
						is_owned_by = ROOT
					}
					FROM = {
						transfer_state = PREV
					}
				}
				if = {
					limit = {
						UKR = {
							OR = {
								is_in_faction_with = ROOT
								has_war_with = FROM
							}
						}
					}
					every_state = {
						limit = {
							is_owned_by = UKR
						}
						FROM = {
							transfer_state = PREV
							add_state_core = PREV
						}
					}
				}
				FROM = {
					country_event = { id = soviets.190 hours = 6 }
					news_event = { id = newsrussia2.67 days = 1 }
				}
			}
		}
	}

	#SOV Gets Annexed By SOU and Receives Events
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						tag = SOV
					}
					FROM = {
						tag = SOU
					}
				}
				ROOT = {
					transfer_navy = {
						target = FROM
					}
				}	
				every_state = {
					limit = {
						is_owned_by = ROOT
					}
					FROM = {
						transfer_state = PREV
					}
				}
				if = {
					limit = {
						OR = {
							TAG = UKR
							TAG = GEO
							TAG = BLR
							TAG = AZR
							TAG = ARM
							TAG = KAZ
							TAG = TMS
						}
					}
					SOU = {
						add_state_core = PREV
					}
				}
				FROM = {
					country_event = { id = soviets.238 hours = 3 }
					news_event = { id = newsrussia2.68 days = 1 }
				}

			}
		}
	}

	#Countries with the Russian agreement will not mess with Russian affairs
	on_declare_war = {
		effect = {
			if = {
				limit = {
					tag = SOV
					any_country = {
						has_idea = SOV_Root_russian_pact
					}
				}
				hidden_effect = {
					FROM = {
						set_country_flag = is_target_of_russia_with_agreement
					}
					every_country = {
						limit = {
							has_idea = SOV_Root_russian_pact
						}

						add_ai_strategy = {
							type = support
							id = FROM
							value = -1000
						}

						add_ai_strategy = {
							type = alliance
							id = FROM
							value = -1000
						}

						add_ai_strategy = {
							type = send_volunteers_desire
							id = FROM
							value = -1000
						}
					}
				}
			}
		}
	}

	#Undo the hostile behaviors towards Russian enemy
	on_capitulation = {
		effect = {
			if = {
				limit = {
					FROM = {
						has_country_flag = is_target_of_russia_with_agreement
					}
				}
				hidden_effect = {
					FROM = {
						clr_country_flag = is_target_of_russia_with_agreement
					}
					every_country = {
						limit = {
							has_idea = SOV_Root_russian_pact
						}

						add_ai_strategy = {
							type = support
							id = FROM
							value = 1000
						}

						add_ai_strategy = {
							type = alliance
							id = FROM
							value = 1000
						}

						add_ai_strategy = {
							type = send_volunteers_desire
							id = FROM
							value = 1000
						}
					}
				}
			}
		}
	}

	on_startup = {
		effect = {
			SOV = {
				if = {
					limit = {
						has_game_rule = {
							rule = SOV_ai_behavior
							option = RANDOM
						}
					}
					#Undo the Paradox nonsense country flags
					if = {
						limit = {
							has_country_flag = SOV_AI_RANDOM_COMMUNIST_HISTORICAL
						}
						clr_country_flag = SOV_AI_RANDOM_COMMUNIST_HISTORICAL
					}
					if = {
						limit = {
							has_country_flag = SOV_AI_RANDOM_COMMUNIST_ALTERNATE
						}
						clr_country_flag = SOV_AI_RANDOM_COMMUNIST_ALTERNATE
					}
					set_temp_variable = { random_sov_ai_factor = 0 }
					randomize_temp_variable = {
						var = random_sov_ai_factor
						distribution = uniform
						min = 1
						max = 4
					}
					round_temp_variable = random_sov_ai_factor
					#Communist
					if = {
						limit = {
							check_variable = {
								var = random_sov_ai_factor
								value = 1
								compare = equals
							}
						}
						set_country_flag = SOV_AI_RANDOM_COMMUNIST_BEHAVIOR
					}
					#Democratic
					else_if = {
						limit = {
							check_variable = {
								var = random_sov_ai_factor
								value = 2
								compare = equals
							}
						}
						set_country_flag = SOV_AI_RANDOM_DEMOCRATIC_BEHAVIOR
					}
					#Neutrality
					else_if = {
						limit = {
							check_variable = {
								var = random_sov_ai_factor
								value = 3
								compare = equals
							}
						}
						set_country_flag = SOV_AI_RANDOM_NEUTRAL_BEHAVIOR
					}
					#Fascist
					else_if = {
						limit = {
							check_variable = {
								var = random_sov_ai_factor
								value = 4
								compare = equals
							}
						}
						set_country_flag = SOV_AI_RANDOM_FASCIST_BEHAVIOR
					}
				}
			}
		}
	}

	on_capitulation = {
		effect = {
			if = {
				limit = {
					any_state = {
						is_owned_by = ROOT
						OR = {
							state = 408
							state = 409
							state = 560
							state = 655
							state = 537
							state = 657
							state = 561
							state = 574
							state = 562
							state = 637
							state = 644
							state = 563
							state = 565
							state = 564
							state = 575
							state = 516
							state = 566
							state = 567
							state = 576
							state = 568
							state = 569
							state = 578
							state = 570
							state = 577
							state = 571
							state = 508
							state = 654
							state = 40
							state = 329
						}
					}
					any_state = {
						NOT = {
							is_core_of = SIB
						}
					}
				}
				SIB = {
					add_state_core = 408
					add_state_core = 409
					add_state_core = 560
					add_state_core = 655
					add_state_core = 537
					add_state_core = 657
					add_state_core = 561
					add_state_core = 574
					add_state_core = 562
					add_state_core = 637
					add_state_core = 644
					add_state_core = 563
					add_state_core = 565
					add_state_core = 564
					add_state_core = 575
					add_state_core = 516
					add_state_core = 566
					add_state_core = 567
					add_state_core = 576
					add_state_core = 568
					add_state_core = 569
					add_state_core = 578
					add_state_core = 570
					add_state_core = 577
					add_state_core = 571
					add_state_core = 508
					add_state_core = 654
					add_state_core = 40
					add_state_core = 329
				}
			}
		}
	}

	on_startup = {
		effect = {
			if = {
				limit = {
					has_game_rule = {
						rule = sov_fragmentation_status
						option = SOV_FRAGMENTED
					}
				}
				SIB = {
					add_state_core = 408
					add_state_core = 409
					add_state_core = 560
					add_state_core = 655
					add_state_core = 537
					add_state_core = 657
					add_state_core = 561
					add_state_core = 574
					add_state_core = 562
					add_state_core = 637
					add_state_core = 644
					add_state_core = 563
					add_state_core = 565
					add_state_core = 564
					add_state_core = 575
					add_state_core = 516
					add_state_core = 566
					add_state_core = 567
					add_state_core = 576
					add_state_core = 568
					add_state_core = 569
					add_state_core = 578
					add_state_core = 570
					add_state_core = 577
					add_state_core = 571
					add_state_core = 508
					add_state_core = 654
					add_state_core = 40
					add_state_core = 329
				}
				SOV = {
					release = SIB
					create_country_leader = {
						name = "Joseph Stalin"
						desc = "POLITICS_JOSEPH_STALIN_DESC"
						picture = "Portrait_Soviet_Joseph_Stalin.dds"
						expire = "1953.3.1"
						ideology = stalinism
						traits = {
							
						}
					}
                    drop_cosmetic_tag = yes
                    clr_global_flag = SOV_became_russia
				}
			}
		}
	}
}